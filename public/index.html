<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <script src="./index.js" defer></script>
    <title>Mobia Manager</title>
  </head>
  <body>
    <h1>Welcome to MOBIA</h1>

    <div class="container">
      <!-- Removed "Enter Hero Info" container -->

      <h2>Player Team</h2>
      <div class="player-team">
        <label for="playerTeamRoam">Roam:</label>
        <select id="playerTeamRoam" name="playerteam[roam]" required></select>
        <br />

        <label for="playerTeamGold">Gold Lane:</label>
        <select id="playerTeamGold" name="playerteam[gold]" required></select>
        <br />

        <label for="playerTeamMid">Mid Lane:</label>
        <select id="playerTeamMid" name="playerteam[mid]" required></select>
        <br />

        <label for="playerTeamJungle">Jungle:</label>
        <select
          id="playerTeamJungle"
          name="playerteam[jungle]"
          required
        ></select>
        <br />

        <label for="playerTeamExp">Exp Lane:</label>
        <select id="playerTeamExp" name="playerteam[exp]" required></select>
        <br />
      </div>

      <h2>Enemy Team</h2>
      <div class="enemy-team">
        <label for="enemyTeamRoam">Roam:</label>
        <select id="enemyTeamRoam" name="enemyTeam[roam]" required></select>
        <br />

        <label for="enemyTeamGold">Gold Lane:</label>
        <select id="enemyTeamGold" name="enemyTeam[gold]" required></select>
        <br />

        <label for="enemyTeamMid">Mid Lane:</label>
        <select id="enemyTeamMid" name="enemyTeam[mid]" required></select>
        <br />

        <label for="enemyTeamJungle">Jungle:</label>
        <select id="enemyTeamJungle" name="enemyTeam[jungle]" required></select>
        <br />

        <label for="enemyTeamExp">Exp Lane:</label>
        <select id="enemyTeamExp" name="enemyTeam[exp]" required></select>
        <br />
      </div>

      <div class="button-container">
        <button id="executeButton" type="submit">Submit</button>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', function () {
          const executeButton = document.getElementById('executeButton')

          if (executeButton) {
            executeButton.addEventListener('click', async () => {
              const formData = {
                playerteam: {
                  roam: document.getElementById('playerTeamRoam').value,
                  gold: document.getElementById('playerTeamGold').value,
                  mid: document.getElementById('playerTeamMid').value,
                  jungle: document.getElementById('playerTeamJungle').value,
                  exp: document.getElementById('playerTeamExp').value,
                },
                enemyTeam: {
                  roam: document.getElementById('enemyTeamRoam').value,
                  gold: document.getElementById('enemyTeamGold').value,
                  mid: document.getElementById('enemyTeamMid').value,
                  jungle: document.getElementById('enemyTeamJungle').value,
                  exp: document.getElementById('enemyTeamExp').value,
                },
              }

              console.log('FormData enviado al servidor:', formData)

              try {
                const response = await fetch('/create-strategy', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(formData),
                })

                const result = await response.json()
                console.log(result)
              } catch (error) {
                console.error('Error al enviar el formulario:', error.message)
              }
            })
          }
        })
      </script>

      <div class="strategy-result">
        <h2>Create Strategy Result:</h2>
        <ul id="searchResults"></ul>
      </div>
    </div>
  </body>
</html>
